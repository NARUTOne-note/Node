# Version

> 部署系统版本规范及流程📦

发 npm 包对于稍微大点的厂来说都是个频繁需求，因此本地执行计算版本命令以及 `npm publish` 都是不大可行的

## Semver 语义化版本

**版本含义**：

- 小于 1.0.0：测试版，说明该库目前 API 不稳定
- 大于等于 1.0.0：正式版，不同大版本一般都会有破坏性使用，或特性更改
- 版本中携带 alpha、beta、rc 等 tag 字样，统称先行版，一般格式为 `x.y.z-[tag].[次数 / meta 信息]`

  - alpha：内部版本
  - beta：公测版本
  - rc：预发的正式版本

**版本号格式**：

一般的版本号格式都为 `X.Y.Z`，分别的含义为：

- X：major，主版本号，当有不兼容的 API 出现时应该修改该版本号
- Y：minor，次版本号，当有向后兼容的新功能出现时应该修改该版本号
- Z：patch，补丁，当需要修复向后兼容的 bug 时应该修改该版本号

比如当版本号为测试版时（版本小于 1.0.0 时），我们可以将语义修改为 0.minor.patch。因为此时出现不兼容 API 是很正常的事情，不应该直接改动主版本号，而是应该改动次版本号，同时将功能新增及 bug 修复造成的版本变更体现在补丁上。

**版本变更规则**:

- `X.Y.Z` 必须为正整数且前面不能补零。
- `X.Y.Z` 在每次变更版本号时，需要重置更小的版本号至 0。比如说 1.0.2 升级至 1.1.0。
- 同一个版本的先行版多次发布，只需变更末尾的次数或者 meta 值。比如说 1.0.0-beta.0 再次发布先行版应为 1.0.0-beta.1。
- 测试版一般从 0.1.0 开始计算。正式版一般在结束快速迭代以及开发者认为 API 稳定以后就可以发布。

## 依赖版本解释

### ~和^的作用和区别是什么

一般版本是1.0.0（大.中.小）
会匹配最近的小版本依赖包，比如1.2.3会匹配所有1.2.x版本，但是不包括1.3.0
^会匹配最新的中版本依赖包，比如^1.2.3会匹配所有1.x.x的包，包括1.3.0，但是不包括2.0.0

### 其他版本号

“jquery”： “2.0.1” 等于当前版本
“jquery”： “>=1.0.2 <2.1.2” 大于等于version 小于version
“jquery”： “>1.0.2 <=2.3.4” 大于version 小于等于version
“jquery”： “<2.3.4” 小于version
“jquery”： “<=2.3.4” 小于等于version
“jquery”： “>2.3.4” 大于version
“jquery”： “>=2.3.4” 大于等于version
“jquery”： “<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 <3.0.0” 三选一version
“jquery”： “~2.3.4” ~1.2.3会匹配所有1.2.x版本，但是不包括1.3.0
“jquery”： “^2.3.4” ^1.2.3会匹配所有1.x.x的包，包括1.3.0，但是不包括2.0.0

常用就这些，一般就用~和^或者直接写版本

> 以上就是npm常用一些小知识。
